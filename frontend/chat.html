<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatar - Chat</title>
    
    <!-- Preferencia de tema -->
    <link id="theme-link" rel="stylesheet" href="./assets/css/chat-dark.css" />
    <script>
        const theme = localStorage.getItem('theme') || 'dark';
        const link = document.getElementById('theme-link');
        link.href = `./assets/css/chat-${theme}.css`;
    </script>
</head>

<body>
    <!-- üé≠ Overlay para men√∫s -->
    <div id="overlay"></div>

    <!-- üìö Sidebar/Men√∫ lateral -->
    <aside id="sidebar" class="menu">
        <div class="sidebar-inner">
            <!-- üë§ Secci√≥n de perfil -->
            <section id="profile-section">
                <h2>Mi perfil</h2>
                <div class="profile-info">
                    <img id="profile-avatar" class="avatar-large" src="/assets/avatars/default.png" alt="Avatar" />
                    <p><strong>Usuario:</strong> <span id="profile-username">---</span></p>
                    <p><strong>ID:</strong> <span id="profile-id">---</span></p>
                    <p><strong>Creado:</strong> <span id="profile-created">---</span></p>
                    <p><strong>Estado:</strong> <span id="profile-status">---</span></p>
                </div>
                <button onclick="window.location.href='settings.html'">Editar perfil</button>
            </section>

            <!-- ‚öôÔ∏è Secci√≥n de configuraci√≥n -->
            <section id="settings-section">
                <h2>Configuraci√≥n</h2>
                <button onclick="window.location.href='theme.html'">Cambiar tema</button>
                <button disabled>Personalizar chat (Pronto)</button>
                <button onclick="window.location.href='creditos.html'">Cr√©ditos</button>
            </section>

            <!-- üîê Cerrar sesi√≥n -->
            <button id="logout-button" class="logout">Cerrar sesi√≥n</button>
        </div>
    </aside>

    <!-- üöÄ Topbar/Barra superior -->
    <header id="topbar">
        <img id="avatar" class="avatar" src="/assets/avatars/default.png" alt="Avatar" />
        <span id="username">Cargando...</span>
        <button id="menu-toggle">‚ò∞</button>
    </header>

    <!-- üí¨ √Årea de chat principal -->
    <main id="chat-container">
        <div id="messages"></div>
    </main>

    <!-- ‚úâÔ∏è Formulario de mensaje -->
    <form id="message-form">
        <input type="text" id="message-input" placeholder="Escribe un mensaje..." autocomplete="off" />
        <button type="submit">Enviar</button>
    </form>

    <!-- üì¶ Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script type="module" src="/assets/js/chat.js"></script>
    
    <!-- Tema como fallback -->
    <script>
        const theme = localStorage.getItem('theme') || 'dark';
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = `/assets/css/chat-${theme}.css`;
        document.head.appendChild(link);
    </script>
</body>
</html>
